{"version":3,"sources":["private/parse/parseLocalDeclares.js"],"names":[],"mappings":"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","file":"private/parse/parseLocalDeclares.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", 'op/Op', '../ast/locals', '../context', '../token/Group', '../token/Keyword', '../token/Token', './checks', './parseSpaced', './Slice'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Op_1 = require('op/Op');\n    var locals_1 = require('../ast/locals');\n    var context_1 = require('../context');\n    var Group_1 = require('../token/Group');\n    var Keyword_1 = require('../token/Keyword');\n    var Token_1 = require('../token/Token');\n    var checks_1 = require('./checks');\n    var parseSpaced_1 = require('./parseSpaced');\n    var Slice_1 = require('./Slice');\n    function parseLocalDeclares(tokens) {\n        return tokens.map(parseLocalDeclare);\n    }\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.default = parseLocalDeclares;\n    function parseLocalDeclaresJustNames(tokens) {\n        return tokens.map(_ => locals_1.LocalDeclare.plain(_.loc, parseLocalName(_)));\n    }\n    exports.parseLocalDeclaresJustNames = parseLocalDeclaresJustNames;\n    function parseLocalDeclare(token) {\n        const { name, opType, kind } = parseLocalParts(token);\n        return new locals_1.LocalDeclare(token.loc, name, opType, kind);\n    }\n    exports.parseLocalDeclare = parseLocalDeclare;\n    function parseLocalDeclareFromSpaced(tokens) {\n        const { name, opType, kind } = parseLocalPartsFromSpaced(tokens);\n        return new locals_1.LocalDeclare(tokens.loc, name, opType, kind);\n    }\n    exports.parseLocalDeclareFromSpaced = parseLocalDeclareFromSpaced;\n    function parseLocalDeclaresAndMemberArgs(tokens) {\n        const declares = [], memberArgs = [];\n        for (const token of tokens) {\n            const { name, opType, kind, isMember } = parseLocalParts(token, true);\n            const declare = new locals_1.LocalDeclare(token.loc, name, opType, kind);\n            declares.push(declare);\n            if (isMember)\n                memberArgs.push(declare);\n        }\n        return { declares: declares, memberArgs: memberArgs };\n    }\n    exports.parseLocalDeclaresAndMemberArgs = parseLocalDeclaresAndMemberArgs;\n    function parseLocalName(token) {\n        if (Keyword_1.isKeyword(109, token))\n            return '_';\n        else if (token instanceof Token_1.NameToken)\n            return token.name;\n        else\n            throw context_1.fail(token.loc, _ => _.expectedLocalName(token));\n    }\n    exports.parseLocalName = parseLocalName;\n    function parseLocalDeclareOrFocus(tokens) {\n        if (tokens.isEmpty())\n            return locals_1.LocalDeclare.focus(tokens.loc);\n        else {\n            context_1.check(tokens.size() === 1, tokens.loc, _ => _.expectedOneLocal);\n            const token = tokens.head();\n            if (token instanceof Group_1.GroupSpace) {\n                const slice = Slice_1.Tokens.of(token);\n                if (Keyword_1.isKeyword(96, slice.head()))\n                    return locals_1.LocalDeclare.typedFocus(tokens.loc, parseSpaced_1.default(slice.tail()));\n            }\n            return parseLocalDeclare(token);\n        }\n    }\n    exports.parseLocalDeclareOrFocus = parseLocalDeclareOrFocus;\n    function parseLocalParts(token, orMember = false) {\n        return token instanceof Group_1.GroupSpace ?\n            parseLocalPartsFromSpaced(Slice_1.Tokens.of(token), orMember) :\n            { name: parseLocalName(token), opType: null, kind: 0, isMember: false };\n    }\n    exports.parseLocalParts = parseLocalParts;\n    function parseLocalPartsFromSpaced(tokens, orMember = false) {\n        const [rest, kind, isMember] = Keyword_1.isKeyword(132, tokens.head()) ?\n            [tokens.tail(), 1, false] :\n            orMember && Keyword_1.isKeyword(101, tokens.head()) ?\n                [tokens.tail(), 0, true] :\n                [tokens, 0, false];\n        const name = parseLocalName(rest.head());\n        const rest2 = rest.tail();\n        const opType = Op_1.opIf(!rest2.isEmpty(), () => {\n            const colon = rest2.head();\n            checks_1.checkKeyword(96, colon);\n            const tokensType = rest2.tail();\n            checks_1.checkNonEmpty(tokensType, _ => _.expectedAfterColon);\n            return parseSpaced_1.default(tokensType);\n        });\n        return { name: name, opType: opType, kind: kind, isMember: isMember };\n    }\n});\n"],"sourceRoot":"/source/"}